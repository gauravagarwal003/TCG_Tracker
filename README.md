# Pokemon Investment Tracker

Track the total market value of your Pokemon TCG collection and your net cost basis over time.

## Features

- **Transaction Types:** BUY, SELL, OPEN (sealed product), TRADE
- **Daily Price Tracking:** Automated via GitHub Actions at 3 PM PST
- **Derived Daily Summary:** Total portfolio value and cost basis for every day since inception
- **Carry-Forward Pricing:** Missing price days use the last known price
- **Inventory Validation:** Prevents negative quantities at any point in time
- **Backdated Transactions:** Full timeline rebuild on every change
- **GitHub Pages Dashboard:** Password-protected site with interactive Plotly charts
- **Flask Local UI:** Add/edit/delete transactions with product search

## Setup

1. **Python 3.10+** and **7zip** required
2. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
3. Run locally:
   ```bash
   ./run_app.sh
   ```
   Open http://127.0.0.1:5001

## Project Structure

| File | Purpose |
|------|---------|
| `engine.py` | Core engine — inventory timeline, daily summary derivation, price loading |
| `transaction_manager.py` | CRUD for transactions with validation |
| `price_fetcher.py` | Fetches prices from tcgcsv.com (7z archives) |
| `app.py` | Flask web app for local development |
| `daily_run.py` | Daily job — fetch prices, derive summary, generate static data |
| `config.json` | Start date, timezone, GitHub config |
| `transactions.json` | All transactions (source of truth) |
| `mappings.json` | Product metadata (name, URL, image) |
| `prices/` | Per-product price history (`{cat}/{group}/{product}.json`) |
| `daily_summary.json` | Derived daily portfolio values |
| `docs/` | GitHub Pages static site |

## GitHub Actions

The daily workflow (`.github/workflows/daily-update.yml`) runs at 3 PM PST:
1. Fetches today's prices for all held products
2. Re-derives the daily summary
3. Generates static JSON files in `docs/data/`
4. Commits and pushes

## GitHub Pages

The `docs/` folder is served via GitHub Pages with password + PAT authentication.
Data files in `docs/data/` are auto-generated by the daily job.
